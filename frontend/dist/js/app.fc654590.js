(function(){"use strict";var e={8486:function(e,t,s){var a=s(5130),n=s(6768),r=s(4232);const l={id:"app"},o={class:"bg-gray-800 text-white p-4"},c={class:"container mx-auto flex justify-between items-center"},i={class:"container mx-auto p-4"},u={class:"bg-gray-100 py-4 mt-8"},d={class:"container mx-auto text-center text-gray-600"};function p(e,t){const s=(0,n.g2)("router-link"),a=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("header",o,[(0,n.Lk)("div",c,[t[2]||(t[2]=(0,n.Lk)("h1",{class:"text-2xl font-bold"},"ClickHouse Backup Manager",-1)),(0,n.Lk)("nav",null,[(0,n.bF)(s,{to:"/",class:"mr-4"},{default:(0,n.k6)(()=>t[0]||(t[0]=[(0,n.eW)("Dashboard")])),_:1,__:[0]}),(0,n.bF)(s,{to:"/settings"},{default:(0,n.k6)(()=>t[1]||(t[1]=[(0,n.eW)("Settings")])),_:1,__:[1]})])])]),(0,n.Lk)("main",i,[(0,n.bF)(a)]),(0,n.Lk)("footer",u,[(0,n.Lk)("div",d," Backup System Â© "+(0,r.v_)((new Date).getFullYear()),1)])])}var g=s(1241);const b={},k=(0,g.A)(b,[["render",p]]);var h=k,f=s(8665);const m={class:"dashboard-page"},y={class:"mb-8"};function v(e,t,s,a,r,l){const o=(0,n.g2)("CreateBackup"),c=(0,n.g2)("BackupList");return(0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",y,[(0,n.bF)(o,{onBackupCreated:e.fetchBackups,loading:e.loading},null,8,["onBackupCreated","loading"])]),(0,n.bF)(c,{backups:e.backups,loading:e.loading,error:e.error,onRefresh:e.fetchBackups},null,8,["backups","loading","error","onRefresh"])])}var x=s(782);const L={class:"create-backup"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},w=["disabled"],B=["disabled"],C=["disabled"],_={key:1,class:"mt-4 p-4 bg-gray-100 rounded-lg"};function E(e,t,s,a,l,o){return(0,n.uX)(),(0,n.CE)("div",L,[t[7]||(t[7]=(0,n.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Create New Backup",-1)),(0,n.Lk)("div",S,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>o.createBackup("auto")),class:"bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg shadow transition",disabled:s.loading},t[3]||(t[3]=[(0,n.Lk)("h3",{class:"font-bold text-lg mb-2"},"Auto Backup",-1),(0,n.Lk)("p",null,"Creates full backup on Sundays, incremental on other days",-1)]),8,w),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>o.createBackup("full")),class:"bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg shadow transition",disabled:s.loading},t[4]||(t[4]=[(0,n.Lk)("h3",{class:"font-bold text-lg mb-2"},"Full Backup",-1),(0,n.Lk)("p",null,"Complete database snapshot",-1)]),8,B),(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>o.createBackup("incremental")),class:"bg-teal-500 hover:bg-teal-600 text-white p-4 rounded-lg shadow transition",disabled:s.loading},t[5]||(t[5]=[(0,n.Lk)("h3",{class:"font-bold text-lg mb-2"},"Incremental Backup",-1),(0,n.Lk)("p",null,"Only changes since last full backup",-1)]),8,C)]),l.message?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,r.C4)([l.messageClass,"p-4 rounded-lg"])},(0,r.v_)(l.message),3)):(0,n.Q3)("",!0),s.loading?((0,n.uX)(),(0,n.CE)("div",_,t[6]||(t[6]=[(0,n.Lk)("p",{class:"text-center"},"Creating backup, please wait...",-1),(0,n.Lk)("div",{class:"mt-2 h-2 bg-gray-300 rounded overflow-hidden"},[(0,n.Lk)("div",{class:"h-full bg-blue-500 animate-pulse",style:{width:"60%"}})],-1)]))):(0,n.Q3)("",!0)])}var A={props:{loading:Boolean},data(){return{message:"",messageClass:""}},methods:{async createBackup(e){this.message="";try{const t=await this.$store.dispatch("createBackup",e);t.success?(this.message=`Backup created successfully: ${t.output||""}`,this.messageClass="bg-green-100 text-green-800",this.$emit("backup-created")):(this.message=`Error: ${t.message}`,this.messageClass="bg-red-100 text-red-800")}catch(t){this.message=`Request failed: ${t.message}`,this.messageClass="bg-red-100 text-red-800"}}}};const R=(0,g.A)(A,[["render",E]]);var D=R;const O={class:"backup-list"},T={class:"flex justify-between items-center mb-4"},$={key:0,class:"text-center py-8"},P={key:1,class:"bg-red-100 text-red-700 p-4 rounded mb-4"},X={key:2},U={key:0,class:"text-center py-8"},N={key:1,class:"overflow-x-auto"},F={class:"min-w-full bg-white rounded-lg overflow-hidden"},I={class:"py-3 px-4"},j={class:"py-3 px-4"},V={class:"py-3 px-4"},G={class:"py-3 px-4"},K={class:"py-3 px-4"},H=["onClick","disabled"],M=["onClick","disabled"];function z(e,t,s,a,l,o){const c=(0,n.g2)("StatusBadge");return(0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("div",T,[t[1]||(t[1]=(0,n.Lk)("h2",{class:"text-xl font-semibold"},"Available Backups",-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("refresh")),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"}," Refresh ")]),s.loading?((0,n.uX)(),(0,n.CE)("div",$,t[2]||(t[2]=[(0,n.Lk)("p",null,"Loading backups...",-1)]))):s.error?((0,n.uX)(),(0,n.CE)("div",P,(0,r.v_)(s.error),1)):((0,n.uX)(),(0,n.CE)("div",X,[0===s.backups.length?((0,n.uX)(),(0,n.CE)("div",U,t[3]||(t[3]=[(0,n.Lk)("p",null,"No backups found",-1)]))):((0,n.uX)(),(0,n.CE)("div",N,[(0,n.Lk)("table",F,[t[4]||(t[4]=(0,n.Lk)("thead",{class:"bg-gray-200"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{class:"py-3 px-4 text-left"},"Name"),(0,n.Lk)("th",{class:"py-3 px-4 text-left"},"Type"),(0,n.Lk)("th",{class:"py-3 px-4 text-left"},"Date"),(0,n.Lk)("th",{class:"py-3 px-4 text-left"},"Size"),(0,n.Lk)("th",{class:"py-3 px-4 text-left"},"Actions")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.backups,e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.name,class:"border-b hover:bg-gray-50"},[(0,n.Lk)("td",I,(0,r.v_)(e.name),1),(0,n.Lk)("td",j,[(0,n.bF)(c,{type:e.type},null,8,["type"])]),(0,n.Lk)("td",V,(0,r.v_)(o.formatDate(e.name)),1),(0,n.Lk)("td",G,(0,r.v_)(e.size||"N/A"),1),(0,n.Lk)("td",K,[(0,n.Lk)("button",{onClick:t=>o.restoreBackup(e.name),class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded mr-2",disabled:l.isRestoring}," Restore ",8,H),(0,n.Lk)("button",{onClick:t=>o.deleteBackup(e.name),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",disabled:l.isDeleting}," Delete ",8,M)])]))),128))])])]))]))])}function Q(e,t,s,a,l,o){return(0,n.uX)(),(0,n.CE)("span",{class:(0,r.C4)(o.badgeClasses)},(0,r.v_)(o.typeLabel),3)}var W={props:{type:String},computed:{typeLabel(){return"full"===this.type?"Full":"incremental"===this.type?"Incremental":this.type||"Unknown"},badgeClasses(){const e="px-2 py-1 rounded-full text-xs font-bold";return"full"===this.type?`${e} bg-blue-100 text-blue-800`:"incremental"===this.type?`${e} bg-green-100 text-green-800`:`${e} bg-gray-100 text-gray-800`}}};const Y=(0,g.A)(W,[["render",Q]]);var q=Y,J={components:{StatusBadge:q},props:{backups:Array,loading:Boolean,error:String},data(){return{isRestoring:!1,isDeleting:!1}},methods:{formatDate(e){const t=e.match(/(\d{4})(\d{2})(\d{2})/);return t?`${t[1]}-${t[2]}-${t[3]}`:e},async restoreBackup(e){if(confirm(`Are you sure you want to restore ${e}? This will overwrite current data.`)){this.isRestoring=!0;try{const t=await this.$store.dispatch("restoreBackup",e);t.success?alert("Restore completed successfully!"):alert(`Restore failed: ${t.message}`)}finally{this.isRestoring=!1}}},async deleteBackup(e){if(confirm(`Permanently delete ${e}?`)){this.isDeleting=!0;try{alert("Delete functionality will be implemented in next version")}finally{this.isDeleting=!1}}}}};const Z=(0,g.A)(J,[["render",z]]);var ee=Z,te={name:"DashboardPage",components:{CreateBackup:D,BackupList:ee},computed:{...(0,x.aH)(["backups","loading","error"])},created(){this.fetchBackups()},methods:{...(0,x.i0)(["fetchBackups"])}};const se=(0,g.A)(te,[["render",v]]);var ae=se;const ne={class:"settings"},re={class:"bg-white rounded-lg shadow p-6 max-w-2xl"},le={class:"mb-6"},oe={class:"mb-6"},ce={class:"flex items-center cursor-pointer"},ie={class:"relative"},ue=["disabled"];function de(e,t,s,l,o,c){return(0,n.uX)(),(0,n.CE)("div",ne,[t[6]||(t[6]=(0,n.Lk)("h2",{class:"text-xl font-semibold mb-6"},"Backup Settings",-1)),(0,n.Lk)("div",re,[(0,n.Lk)("div",le,[t[3]||(t[3]=(0,n.Lk)("label",{class:"block text-gray-700 font-medium mb-2"}," Retention Period (days) ",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.localSettings.retentionDays=e),type:"number",min:"1",max:"365",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[a.Jo,o.localSettings.retentionDays,void 0,{number:!0}]]),t[4]||(t[4]=(0,n.Lk)("p",{class:"text-sm text-gray-500 mt-1"}," Backups older than this will be automatically deleted ",-1))]),(0,n.Lk)("div",oe,[(0,n.Lk)("label",ce,[(0,n.Lk)("div",ie,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.localSettings.autoBackup=e),type:"checkbox",class:"sr-only"},null,512),[[a.lH,o.localSettings.autoBackup]]),(0,n.Lk)("div",{class:(0,r.C4)(["block bg-gray-300 w-14 h-8 rounded-full",{"bg-green-400":o.localSettings.autoBackup}])},null,2),(0,n.Lk)("div",{class:(0,r.C4)(["dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition transform",{"translate-x-6":o.localSettings.autoBackup}])},null,2)]),t[5]||(t[5]=(0,n.Lk)("div",{class:"ml-3 text-gray-700 font-medium"}," Enable Daily Automatic Backups ",-1))])]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>c.saveSettings&&c.saveSettings(...e)),class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg",disabled:o.isSaving},(0,r.v_)(o.isSaving?"Saving...":"Save Settings"),9,ue)])])}var pe={name:"SettingsPage",data(){return{localSettings:{...this.$store.state.settings},isSaving:!1}},computed:{...(0,x.aH)(["settings"])},watch:{settings:{handler(e){this.localSettings={...e}},deep:!0}},methods:{saveSettings(){this.isSaving=!0,setTimeout(()=>{this.$store.commit("UPDATE_SETTINGS",this.localSettings),this.isSaving=!1,alert("Settings saved successfully!")},800)}}};const ge=(0,g.A)(pe,[["render",de],["__scopeId","data-v-554d805c"]]);var be=ge;const ke=[{path:"/",name:"Dashboard",component:ae},{path:"/settings",name:"Settings",component:be}],he=(0,f.aE)({history:(0,f.LA)("/"),routes:ke});var fe=he,me=s(5034),ye=(0,x.y$)({state:{backups:[],loading:!1,error:null,settings:{retentionDays:30,autoBackup:!0}},mutations:{SET_BACKUPS(e,t){e.backups=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},UPDATE_SETTINGS(e,t){e.settings={...e.settings,...t}}},actions:{async fetchBackups({commit:e}){e("SET_LOADING",!0);try{const t=await me.A.get("/backups/list");e("SET_BACKUPS",t.data.backups),e("SET_ERROR",null)}catch(t){e("SET_ERROR","Failed to fetch backups"),console.error(t)}finally{e("SET_LOADING",!1)}},async createBackup({dispatch:e},t){try{const s=await me.A.post("/backups/create",{backup_type:t});return e("fetchBackups"),{success:!0,output:s.data.output||"Backup created successfully"}}catch(s){return{success:!1,message:s.response?.data?.output||"Unknown error"}}},async restoreBackup({commit:e},t){try{const e=await me.A.post(`/backups/restore/${t}`);return{success:!0,output:e.data.output||"Restore completed successfully"}}catch(s){return{success:!1,message:s.response?.data?.output||"Restore failed"}}}}});me.A.defaults.baseURL={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"http://localhost:8000",me.A.defaults.headers.common["X-API-Key"]={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_KEY;const ve=(0,a.Ef)(h);ve.config.globalProperties.$http=me.A,ve.use(ye),ve.use(fe),ve.mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,r){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],r=e[u][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||l>=r)&&Object.keys(s.O).every(function(e){return s.O[e](a[c])})?a.splice(c--,1):(o=!1,r<l&&(l=r));if(o){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,l=a[0],o=a[1],c=a[2],i=0;if(l.some(function(t){return 0!==e[t]})){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(c)var u=c(s)}for(t&&t(a);i<l.length;i++)r=l[i],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},a=self["webpackChunkclickhouse_backup_ui"]=self["webpackChunkclickhouse_backup_ui"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(8486)});a=s.O(a)})();
//# sourceMappingURL=app.fc654590.js.map